<html>

<head>
    <script>
        const domains = [
            "https://foundrydao.com",
            "https://www.foundrydao.com"
            ]
        
        window.onmessage = function(event) {
            if (! domains.includes(event.origin)) {
                return;
            }
        
            referralString = event.data;

            if (typeof (Storage) !== "undefined") {
                if (localStorage.getItem("referralAddressString") !== null) {
                    // already have a referral; ignore this request
                    console.log("ignoring new referral " + referralString);
                    return;
                }
                else {
                    localStorage.setItem("referralAddressString", referralString);
                    console.log("stored new referral " + referralString);
                }
            } 
        }
    </script>
</head>

</html>